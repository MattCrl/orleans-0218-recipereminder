{% extends 'Admin/admin_layout.html.twig' %}

{% block content %}
    <div class="container recipeText">
        <h1 class="orange">Bienvenue dans la partie Administrateur !</h1>
        <p align="center">Ici vous pourrez modifier ou ajouter des recettes et des événements.</p>
    </div>
    <section>
    <div class="banner">
        <h1><p class="info">Vous pouvez modifier le texte ici :</p>
            <p class="editable"><span contenteditable="true" id="accroche" data-toggle="tooltip" title="Vous pouvez modifier le texte ici!">{{ accroche }}</span></p>
        </h1>
    </div>
    </section>



{% endblock %}
{% block javascript %}
<script>
$('body').on('focus', '[contenteditable]', function() {
    var $this = $(this);
    $this.data('before', $this.html());
    return $this;
}).on('blur paste', '[contenteditable]', function() {
    var $this = $(this);
    if ($this.data('before') !== $this.html()) {
        $this.data('before', $this.html());
        $this.trigger('change');
    }
    return $this;
});

$('body *[contenteditable]').keydown(function(e) {
    // trap the return key being pressed
    if (e.keyCode === 13) {
        // insert 2 br tags (if only one br tag is inserted the cursor won't go to the next line)
       // document.execCommand('insertHTML', false, '<br><br>');
        // prevent the default behaviour of return key pressed
        return false;
    }
});

$('#accroche').change(function(){
    let accroche = $(this).text();
   $.post('/admin/changeAccroche',{accroche: accroche});
});

$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>
{% endblock %}

